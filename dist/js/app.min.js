"use strict";angular.module("evaluon",["ui.router","LocalStorageModule","ngMaterial","evaluon.auth","evaluon.entity","evaluon.evaluator","evaluon.institution","evaluon.templates"]).config(function($stateProvider,$logProvider,$urlRouterProvider,$locationProvider,localStorageServiceProvider,routingConfigProvider){$logProvider.debugEnabled(!1),$urlRouterProvider.otherwise("/404"),$locationProvider.html5Mode(!0),$stateProvider.state("public",{"abstract":!0,template:"<ui-view/>",data:{access:routingConfigProvider.$get().accessLevels.public}}).state("public.404",{url:"/404",template:'<h1 class="text-center">Error 4:04 Sleep not found</h1>'}),localStorageServiceProvider.setPrefix("dashboardEvaluon").setStorageCookie(30,"/evaluon/dashboard").setNotify(!0,!0)}).run(function($log){$log.debug("app.js load")}),angular.module("evaluon.auth",["ui.router"]).config(function($stateProvider,routingConfigProvider){$stateProvider.state("anon",{"abstract":!0,template:"<ui-view/>",data:{access:routingConfigProvider.$get().accessLevels.public}}).state("anon.login",{url:"/login",templateUrl:"views/auth/login.tpl.html",controller:"LoginCtrl"})}).run(function($log){$log.debug("auth load")});var apiRouter={url:{protocol:"http",host:"evaluon.boolinc.co"},route:function(path){var url=this.url;return"{0}://{1}/{2}".format(url.protocol,url.host,path)},id:function(url,id){return"{0}/{1}".format(url,id)}};angular.module("evaluon").constant("api",{token:apiRouter.route("auth/token"),user:apiRouter.route("user")}).constant("access",{client:{grant_type:"client_credentials",client_id:"administrator",client_secret:"kv0Ls8xoIFPdE2GXMK5fodQsAEBV5GzzINZOA0NX99E="},tokens:{client:"dlav4218f",user:"ial83lcv"}}),angular.module("evaluon.entity",["ui.router"]).config(function(){}).run(function($log){$log.debug("entity load")}),angular.module("evaluon.evaluator",["ui.router"]).config(function(){}).run(function($log){$log.debug("evaluator load")}),angular.module("evaluon.institution",["ui.router"]).config(function(){}).run(function($log){$log.debug("institution load")}),angular.module("evaluon.templates",[]).run(["$templateCache",function($templateCache){$templateCache.put("views/auth/login.tpl.html",'<div layout="horizontal" layout-padding layout-align="center" >\n  <div flex="30">\n    <md-toolbar class="md-whiteframe-z3">\n      <div class="md-toolbar-tools">\n        <span>Evaluon</span>\n        <span flex>Login</span>\n      </div>\n    </md-toolbar>\n    <md-content class="md-padding md-whiteframe-z5" md-theme="light-blue-dark" layout-padding layout-align="center">\n      <form layout="vertical" layout-align="center center" ng-submit="login($event)">\n        <md-text-float label="Correo" type="email" ng-model="user.email" ng-required="true"> </md-text-float>\n        <md-text-float label="Contraseña" type="password" ng-model="user.password" ng-required="true"> </md-text-float>\n        <md-button type="submit" aria-label="Iniciar Sesion" md-theme="light-blue-dark" class="md-primary">\n           Iniciar Sesion\n        </md-button>\n      </form>\n   </md-content>\n  </div>\n</div>\n')}]),angular.module("evaluon.auth").controller("LoginCtrl",function($scope,Auth){$scope.user={email:"nombre@correo.co",password:"contraseña"},$scope.login=function(event){event.preventDefault(),Auth.clientCredentials().then(function(token){return Auth.password(token.token_type,token.access_token,$scope.user.email,$scope.user.password)}).then(function(token){console.log(token)}).catch(function(error){console.error(error)})}}),angular.module("evaluon.auth").factory("Auth",function(api,access,$http){return{clientCredentials:function(){return $http({method:"post",url:api.token,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(access.client)}).then(function(data){return data.data})},password:function(tokenType,accessToken,username,password){return console.log(CryptoJS),$http({method:"post",url:api.token,headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"{0} {1}".format(tokenType,accessToken)},data:$.param({grant_type:"password",username:username,password:CryptoJS.SHA1(password).toString()})}).then(function(data){return data.data})}}}),angular.module("evaluon.auth").provider("routingConfig",function(){this.userRoles={"public":1,evaluator:2,institution:4,entity:8};var that=this;this.accessLevels={"public":that.userRoles.public|that.userRoles.evaluator|that.userRoles.institution|that.userRoles.entity,anon:that.userRoles.public,evaluator:that.userRoles.evaluator,institution:that.userRoles.institution,entity:that.userRoles.entity},this.$get=function(){var that=this;return{userRoles:that.userRoles,accessLevels:that.accessLevels}}});